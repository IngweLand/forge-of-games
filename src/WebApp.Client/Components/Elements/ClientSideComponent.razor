@using MudBlazor.Utilities
<div class="@Classname">
    @if (Title != null)
    {
        <span class="@TitleClassname">@Title</span>
    }
    @if (_isBrowser)
    {
        @Content
    }
    @if (!_isBrowser || IsLoading)
    {
        <div class="loading-indicator">
            <MudProgressLinear Color="Color.Secondary" Indeterminate="true"/>
        </div>
    }

</div>

@code {

    [Parameter]
    [EditorRequired]
    public required RenderFragment Content { get; set; }

    [Parameter]
    public string? Title { get; set; }

    [Parameter]
    public bool IsLoading { get; set; }

    [Parameter]
    public string? Class { get; set; }
    
    [Parameter]
    public string? TitleClass { get; set; }

    private bool _isBrowser;

    protected override void OnInitialized()
    {
        _isBrowser = OperatingSystem.IsBrowser();
    }

    private string Classname =>
        new CssBuilder("component-root")
            .AddClass(Class)
            .Build();
    
    private string TitleClassname =>
        new CssBuilder("title")
            .AddClass(TitleClass)
            .Build();

}
