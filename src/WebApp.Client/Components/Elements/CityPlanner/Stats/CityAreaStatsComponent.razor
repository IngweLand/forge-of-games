@using Ingweland.Fog.Application.Client.Core.Localization
@using Ingweland.Fog.Application.Client.Web.CityPlanner.Stats
@using Ingweland.Fog.Application.Client.Web.Providers.Interfaces
@using Microsoft.Extensions.Localization
@inject IStringLocalizer<FogResource> Loc
@inject IAssetUrlProvider AssetUrlProvider
<div class="component-root">
    <StatsSectionHeader Label="@Loc[FogResource.CityPlanner_Area]" OnClick="OnHeaderClick"/>
    <MudCollapse Expanded="_expanded">
        <div class="main-container">
            <div class="areas-by-type-items-container">
                <div class="value-container">
                    <img src="@AssetUrlProvider.GetHohIconUrl("icon_flat_expansion")" class="value-icon">
                    <span class="value-label user-select-none">@Data.TotalArea</span>
                </div>
                @foreach (var item in Data.AreasByType)
                {
                    <div class="value-container">
                        <img src="@item.IconUrl" class="value-icon">
                        <span class="value-label user-select-none">@item.Label</span>
                    </div>
                }
            </div>
            <table class="table">
                <thead>
                <tr>
                    <th class="table-left-column">@Loc[FogResource.Hoh_Building]</th>
                    <th>@Loc[FogResource.CityPlanner_Count]</th>
                    <th>@Loc[FogResource.CityPlanner_Area]</th>
                </tr>
                </thead>
                <tbody>
                @foreach (var item in Data.AreasByGroup)
                {
                    <tr class="user-select-none">
                        <td class="table-row-label table-left-column">@item.GroupName</td>
                        <td class="table-row-label">@item.Count</td>
                        <td class="table-row-label">@item.Area</td>
                    </tr>
                }
                </tbody>
            </table>
            @if (Data.PremiumExpansionCount != null)
            {
                <div class="premium-expansions-container">
                    <span
                        class="premium-expansions-label">@Loc[FogResource.StatsHub_Player_PremiumExpansions]</span>
                    <GeneralProductionItemComponent Item="@Data.PremiumExpansionCount"/>
                </div>
            }

        </div>
    </MudCollapse>
</div>

@code {

    [Parameter]
    public required AreaStatsViewModel Data { get; set; }

    bool _expanded = true;

    private void OnHeaderClick()
    {
        _expanded = !_expanded;
    }

}